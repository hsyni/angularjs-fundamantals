<!DOCTYPE html>
<html data-ng-app="demoApp">
    <head>
        <title>Using AngularJS Directives and Data Binding</title>
    </head>
    <body>
        <div>
            <!--Placeholder for views-->
            <div data-ng-view=""></div>
        </div>

        <script src="angular-1.0.6/angular.min.js"></script>


        <script>
            var demoApp = angular.module('demoApp', []);

            demoApp.config(function ($routeProvider) {
                $routeProvider
                .when('/view1', 
                {
                    controller: 'SimpleController',
                    templateUrl: 'partials/view1.html'
                })
                .when('/view2',
                    {
                        controller: 'SimpleController',
                        templateUrl: 'partials/view2.html'
                    })
                    .otherwise({redirectTo: '/view1'});
            });

            demoApp.factory('simpleFactory', function() {
                var customers = [
                {name: 'Ali', city: 'Ankara'}, 
                {name: 'Veli', city: 'Istanbul'}, 
                {name: 'Ahmet', city: 'Bursa'}];

                var factory = {};
                factory.getCustomers = function() {
                    return customers;
                };
                factory.postCustomer = function(customer) {

                };

                return factory;
            });


            demoApp.controller('SimpleController', function($scope, simpleFactory) {
                $scope.customers = [];

                init();

                function init() {
                    $scope.customers = simpleFactory.getCustomers();
                }

                // Giriş bağlaması için newCustomer objesi başlatılıyor
                $scope.newCustomer = {};

                $scope.addCustomer = function() {
                    $scope.customers.push({name: $scope.newCustomer.name, city: $scope.newCustomer.city});

                    $scope.newCustomer.name = '';
                    $scope.newCustomer.city = '';
                }
            });

        </script>
    </body>
</html>